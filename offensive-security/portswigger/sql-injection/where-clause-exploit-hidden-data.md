# PortSwigger Lab: SQL Injection in WHERE Clause (Hidden Data Retrieval)

## Objective
To exploit a SQL injection vulnerability in the WHERE clause to retrieve hidden products.

## Lab Description
This lab contains a SQL injection vulnerability in the product category filter. When the user selects a category, the application carries out a SQL query like the following:
```
SELECT * FROM products WHERE category = 'Gifts' AND released = 1
```

## Exploitation

### 1. Initial Observation
The application allowed filtering products by category (e.g., Gifts, Accessories, etc.). The category value was reflected in the URL, indicating it was being used in a backend query.

### 2. Initial Injection Attempt
I tried adding a single quote to the category parameter to check for SQL injection:

```
category=Gifts'
```

This popped up an internal server error, indicating that I had broken the query.
Probably something like SELECT * FROM products WHERE category = 'Gifts''AND released = 1 was being passed, causing a syntax error in the database query.

---

### 3. Testing Comment Injection
I then attempted to comment out the rest of the query using:
```
category=Gifts'--
```
This returned one additional (hidden) product, indicating that the query was being modified successfully.
However, the lab was not solved yet, as it only revealed products from a specific category.

---

### 4. Understanding the Requirement
The goal of the lab was to display hidden products.
I realised that I needed to bypass the category parameter to display all unreleased products across all categories

---

### 5. Exploitation
To achieve this, I used the following payload:
```
category=' OR 0=0--
```

### Explanation:
- `'` closes the existing string 
- `OR 0=0` makes the condition always true
- `--` comments out the remaining part of the query

---

### 6. Result
The application displayed all products, including hidden ones, successfully solving the lab.

---

## Impact

An attacker can manipulate database queries to access hidden or restricted data, which may lead to sensitive information disclosure.

---

## Key Learning

- SQL injection occurs when user input is not sanitised
- The WHERE clause can be manipulated to bypass filters
- Comments (`--`) can be used to ignore parts of a query
- Logical conditions like `OR 0=0` can force queries to return all results
